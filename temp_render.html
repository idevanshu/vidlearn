<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>p5.js Animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ccapture.js@1.1.0/build/CCapture.all.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: black;
      }
    </style>
  </head>
  <body>
    <script>
      let startFrame;
let textAlpha = 0;
let stopwatchAngle = 0;
let nodeYpositions = [300, 350, 400];
let nodeXpositions = [200, 300, 400];
let nodesOpacity = [0, 0, 0];

function setup() {
  createCanvas(800, 600);
  startFrame = frameCount;
}

function draw() {
  background(0);
  let elapsedFrames = frameCount - startFrame;
  
  // Draw stopwatch
  let stopwatchSize = 100;
  let centerX = width / 2;
  let centerY = height / 2 - 150;
  
  noFill();
  strokeWeight(4);
  stroke(255, 200);
  ellipse(centerX, centerY, stopwatchSize, stopwatchSize);
  
  // Draw stopwatch needle
  let needleLength = stopwatchSize / 2 - 10;
  strokeWeight(3);
  let angle = map(elapsedFrames, 0, 120, 0, TWO_PI);
  let nx = centerX + cos(angle - HALF_PI) * needleLength;
  let ny = centerY + sin(angle - HALF_PI) * needleLength;
  line(centerX, centerY, nx, ny);
  
  // Nodes operation and highlighting
  fill(0);
  stroke(255, 200);
  strokeWeight(1);
  for (let i = 0; i < nodeXpositions.length; i++) {
    if (elapsedFrames > 60 + i * 20) {
      nodesOpacity[i] = min(nodesOpacity[i] + 5, 255);
    }
    fill(255, nodesOpacity[i]);
    ellipse(nodeXpositions[i], nodeYpositions[i], 40, 40);
    if (i < nodeXpositions.length - 1) {
      line(nodeXpositions[i] + 20, nodeYpositions[i], nodeXpositions[i + 1] - 20, nodeYpositions[i + 1]);
    }
  }
  
  // Log efficiency and final text
  if (elapsedFrames > 120) {
    textSize(32);
    fill(255, textAlpha);
    text('log(n)', centerX, centerY + 60);
    if (textAlpha < 255) {
      textAlpha += 5;
    }
  }
  
  if (elapsedFrames > 180) {
    fill(255);
    textSize(16);
    text("These rules ensure that the tree remains approximately balanced,", 50, height - 70);
    text("allowing for operations like insertion and search to run in logarithmic time.", 50, height - 50);
  }
  
  if (elapsedFrames > 480) {
    noLoop();
  }
}
    </script>
  </body>
</html>