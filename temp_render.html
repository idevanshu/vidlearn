<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>p5.js Animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ccapture.js@1.1.0/build/CCapture.all.min.js"></script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
        width: 100%;
        height: 100%;
      }

      canvas {
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <script>
      let CUSTOM_BG = 0;
let STONE_COLOR = 150;
let PEBBLE_COLOR = 220;
let TEXT_COLOR = 255;
let ARROW_COLOR = {r:100, g:200, b:255};

let largeR = 50;
let smallR = 20;
let yGround = 580;
let startFrame = 0;

function setup() {
  createCanvas(800, 600);
  frameRate(60);
  textAlign(CENTER, CENTER);
  textSize(24);
}

function draw() {
  background(CUSTOM_BG);
  let fc = frameCount;
  // ground
  stroke(255);
  strokeWeight(2);
  line(0, yGround, width, yGround);
  // narration text
  if (fc <= 180) {
    noStroke();
    fill(TEXT_COLOR);
    text("The more mass an object has, the more inertia it possesses.", width/2, 100);
  }
  // motion progress
  let x1 = 200;
  let x2 = 200;
  if (fc >= 120) {
    let t = constrain((fc - 120) / 360, 0, 1);
    let e = t * t;
    x1 += e * 100;
    x2 += e * 400;
  }
  let y1 = yGround - largeR;
  let y2 = yGround - smallR;
  // stone
  noStroke();
  fill(STONE_COLOR);
  ellipse(x1, y1, largeR * 2, largeR * 2);
  // pebble
  fill(PEBBLE_COLOR);
  ellipse(x2, y2, smallR * 2, smallR * 2);
  // force arrows
  if (fc >= 120) {
    let aAlpha = constrain(map(fc, 120, 150, 0, 200), 0, 200);
    stroke(ARROW_COLOR.r, ARROW_COLOR.g, ARROW_COLOR.b, aAlpha);
    strokeWeight(4);
    // stone arrow
    let sx1 = x1 - 30, sy1 = y1, sx2 = x1 + largeR + 20, sy2 = y1;
    line(sx1, sy1, sx2, sy2);
    line(sx2, sy2, sx2 - 10, sy2 - 7);
    line(sx2, sy2, sx2 - 10, sy2 + 7);
    // pebble arrow
    let px1 = x2 - 30, py1 = y2, px2 = x2 + smallR + 20, py2 = y2;
    line(px1, py1, px2, py2);
    line(px2, py2, px2 - 10, py2 - 7);
    line(px2, py2, px2 - 10, py2 + 7);
  }
  if (fc > 500) {
    noLoop();
  }
}
    </script>
  </body>
</html>